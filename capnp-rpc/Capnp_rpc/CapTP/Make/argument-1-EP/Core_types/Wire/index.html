<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wire (capnp-rpc.Capnp_rpc.CapTP.Make.1-EP.Core_types.Wire)</title><link rel="stylesheet" href="../../../../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../../../../index.html">capnp-rpc</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Capnp_rpc.CapTP.Make.1-EP.Core_types.Wire</span></h1></header><p>The core RPC logic can be used with different serialisation systems.
The appropriate types should be provided here.</p><div class="spec type" id="type-request"><a href="#type-request" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>request</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-response"><a href="#type-response" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>response</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-msg"><a href="#type-msg" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a msg</code><code></code><code></code></div><div class="doc"></div></div><div class="spec module" id="module-Path"><a href="#module-Path" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Path/index.html">Path</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Request"><a href="#module-Request" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Request/index.html">Request</a> : <a href="../../../../../S/index.html#module-type-WIRE_PAYLOAD">S.WIRE_PAYLOAD</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../../../../../S/module-type-WIRE_PAYLOAD/index.html#type-t">t</a><span class="keyword"> = </span><a href="index.html#type-request">request</a> <a href="index.html#type-msg">msg</a><span class="keyword"> and </span><span class="keyword">type </span><a href="../../../../../S/module-type-WIRE_PAYLOAD/index.html#type-path">path</a> := <a href="index.html#module-Path">Path</a>.t</code></div><div class="doc"></div></div><div class="spec module" id="module-Response"><a href="#module-Response" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Response/index.html">Response</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec val" id="val-ref_leak_detected"><a href="#val-ref_leak_detected" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ref_leak_detected : (unit <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">ref_leak_detected fn</code> is called when a promise or capability is GC'd while
its ref-count is non-zero, indicating that resources may have been leaked.
<code class="code">fn ()</code> will log a warning about this and free the resources itself.
The reason for going via <code class="code">ref_leak_detected</code> rather than calling <code class="code">fn</code> directly
is because the OCaml GC may detect the problem at any point (e.g. while we're
sending another message). The implementation should arrange for <code class="code">fn</code> to be
called at a safe point (e.g. when returning to the main loop).
Unit-tests may wish to call <code class="code">fn</code> immediately to show the error and then
fail the test.</p></div></div></body></html>